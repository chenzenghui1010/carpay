webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("//Fk"),i=a.n(n),s=a("7+uW"),r={name:"carpay",data:function(){return{parkCode:window.parkCode,url:location.href,logo:a("kWZM"),max:7,carNo:"",navS:["一般车牌","新能源车"],listInput:[{carNum:"",isShow:!0},{carNum:"",isShow:!0},{carNum:"",isShow:!0},{carNum:"",isShow:!0},{carNum:"",isShow:!0},{carNum:"",isShow:!0},{carNum:"",isShow:!0},{carNum:"",isShow:!1}],activeIndex:0,cup:!1}},created:function(){this.carNo=localStorage.getItem("carNo");for(var t=0;t<this.carNo.length;t++)this.listInput[t].carNum=this.carNo.slice(t,t+1);this.focus},methods:{focus:function(){this.listInput[0].carNum.focus()},next:function(){for(var t=0;t<this.listInput.length;t++)this.listInput[t].carNum.length},getQueryVariable:function(t){for(var e=window.location.search.substring(1).split("&"),a=0;a<e.length;a++){var n=e[a].split("=");if(n[0]==t)return n[1]}return!1},showColor:function(t){this.activeIndex=t,0!=this.activeIndex?this.listInput[7].isShow=!0:this.listInput[7].isShow=!1},onPay:function(){var t=this,e=this.getQueryVariable("clientId");localStorage.setItem("carNo",this.carNo);var a={parkCode:this.parkCode,carNo:this.carNo,orderType:"VNP"};this.$axios.post("https://ceshicloud-of.jslife.net/jparking-service/order/carno/pay",a).then(function(a){if(0==a.data.resultCode)if("没找到对应的入场记录"!=a.data.dataItems[0].attributes.retmsg){var n=a.data.dataItems[0].attributes,i=n.endTime,s=n.startTime,r=n.totalFee,o=n.orderNo;t.$router.push({path:"pay",query:{openId:e,endTime:i,startTime:s,totalFee:r,orderNo:o}})}else t.cup=!0}).catch(function(t){console.log(t)})},close:function(){this.cup=!1}},computed:{maxlenght:function(){return 0!=this.activeIndex?this.max=8:this.max=7}},updated:function(){if(0!=this.activeIndex)for(var t=0;t<this.listInput.length;t++)this.listInput[t].carNum=this.carNo.slice(t,t+1).toUpperCase();else for(var e=0;e<this.listInput.length-1;e++)this.listInput[e].carNum=this.carNo.slice(e,e+1).toUpperCase()},directives:{focus:{inserted:function(t){t.focus()}}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"carpay"},[t.cup?a("div",{class:{cup:t.cup}},[a("div",{class:{alert:t.cup}},[a("p",[t._v("没找到对应的入场记录")]),t._v(" "),a("p",{on:{click:t.close}},[t._v("确 定")])])]):t._e(),t._v(" "),a("img",{staticClass:"logo",attrs:{src:t.logo,height:"100",width:"60%"}}),t._v(" "),a("section",[a("div",{staticClass:"section"},[a("nav",[a("ul",t._l(t.navS,function(e,n){return a("li",{class:{active:t.activeIndex==n},on:{click:function(e){t.showColor(n)}}},[t._v(t._s(e)+"\n          ")])}))]),t._v(" "),a("p",[t._v("请输入车牌号："),a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.carNo,expression:"carNo"}],attrs:{type:"text",maxlength:t.maxlenght},domProps:{value:t.carNo},on:{input:function(e){e.target.composing||(t.carNo=e.target.value)}}})]),t._v(" "),a("ul",{staticClass:"listi"},t._l(t.listInput,function(e){return a("li",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:" listI.isShow"}],ref:"input",refInFor:!0},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.carNum,expression:"listI.carNum"}],attrs:{maxlength:"1",type:"text"},domProps:{value:e.carNum},on:{input:function(a){a.target.composing||t.$set(e,"carNum",a.target.value)}}})])}))]),t._v(" "),a("div",{staticClass:"btn"},[a("ul",[a("li",{on:{click:t.onPay}},[t._v(" 确 定")])])])])])},staticRenderFns:[]};var c=a("VU/8")(r,o,!1,function(t){a("meIO")},"data-v-6b514fc8",null).exports,u={name:"open",data:function(){return{}},created:function(){window.location.href=window.openUrl+"?reqSource=WX_JTC&codeType=base&redirectUrl="+window.redirectUrl,window.event&&(window.event.returnValue=!1)}},l={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},p=a("VU/8")(u,l,!1,null,null,null).exports,d={name:"App",components:{CarPay:c,open:p}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var v=a("VU/8")(d,h,!1,function(t){a("nfL4")},null,null).exports,m=a("/ocq"),f=a("mtWM"),_=a.n(f),N=(a("mw3O"),a("Zrlr")),g=a.n(N),y=a("wxAW"),w=a.n(y),I=function(){function t(){g()(this,t)}return w()(t,null,[{key:"pay",value:function(t,e,a,n,i,s,r,o){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t,timeStamp:e,nonceStr:a,package:n,signType:i,paySign:s},function(t){"get_brand_wcpay_request:ok"===t.err_msg?r(t):o(t)})}}]),t}(),S={name:"pay",data:function(){return{callbackUrl:window.callbackUrl,carNo:localStorage.getItem("carNo"),endTime:this.$route.query.endTime,startTime:this.$route.query.startTime,days:"",hours:"",minutes:"",totalFee:this.$route.query.totalFee,orderNo:this.$route.query.orderNo,openId:this.$route.query.openId,payData:""}},created:function(){this.time},methods:{dopay:function(){var t={orderNo:this.orderNo,appType:"SERVICE",payType:"JSAPI",channelId:"WX",openId:this.openId,callbackUrl:this.callbackUrl};this.$axios.post("https://ceshicloud-of.jslife.net/jparking-service/pay/prepay",t).then(function(t){var e=JSON.parse(JSON.parse(t.data.attributes.payPara).payPara).package,a=JSON.parse(JSON.parse(t.data.attributes.payPara).payPara),n=a.appId,i=a.timeStamp,s=a.nonceStr,r=a.signType,o=a.paySign;I.pay(n,i,s,e,r,o,function(){},function(){})}).catch(function(t){console.log(t)})}},computed:{time:function(){var t=this.endTime.replace(/-/g,"/"),e=this.startTime.replace(/-/g,"/"),a=new Date(t).getTime()-new Date(e).getTime(),n=parseInt(a/864e5),i=parseInt(a%36e5/6e4),s=parseInt(a%864e5/36e5),r=n>0?n+"天":"",o=s>0?s+"小时":"",c=i>0?i+"分钟":"";return this.days=r,this.hours=o,this.minutes=c}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pay"},[a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[t._v("确 定 缴 费")]),t._v(" "),a("div",{staticClass:"feeinfo"},[a("div",{staticClass:"feetitle"},[t._v("停车费")]),t._v(" "),a("div",{staticStyle:{"padding-right":"1rem"}},[a("label",{staticClass:"fee"},[t._v(t._s(t.totalFee))]),a("label",{staticClass:"rmb"},[t._v("¥")])])]),t._v(" "),a("div",{staticClass:"section"},[a("p",[a("span",[t._v("车牌号码")]),a("span",[t._v(t._s(t.carNo))])]),t._v(" "),a("p",[a("span",[t._v("入场时间")]),a("span",[t._v(t._s(t.startTime))])]),t._v(" "),a("p",[a("span",[t._v("离场时间")]),a("span",[t._v(t._s(t.endTime))])]),t._v(" "),a("p",[a("span",[t._v("停留时长")]),a("span",[t._v(t._s(t.days)+t._s(t.hours)+t._s(t.minutes))])]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"btn",on:{click:t.dopay}},[t._v("立即缴费")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("支付方式")]),e("span",{staticClass:"wx"},[this._v("微信支付")])])}]};var C=a("VU/8")(S,x,!1,function(t){a("RVNE")},"data-v-5fe1c62e",null).exports;s.a.prototype.$axios=_.a,s.a.use(m.a),_.a.interceptors.request.use(function(t){return t},function(t){return i.a.reject(t)}),_.a.interceptors.response.use(function(t){return t},function(t){return i.a.reject(t)}),s.a.config.productionTip=!1;var k=new m.a({routes:[{path:"/open",component:p},{path:"/",component:c},{path:"/pay",component:C}]});new s.a({router:k,el:"#app",components:{App:v},template:"<App/>"})},RVNE:function(t,e){},kWZM:function(t,e,a){t.exports=a.p+"static/img/LOGO.5eb557f.png"},meIO:function(t,e){},nfL4:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a1aeec7cab6c41567210.js.map